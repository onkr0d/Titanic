# yeah lowkey just rename this file to docker-compose.yml when you copy to umbrel
services:
  app_proxy:
    environment:
      PROXY_AUTH_WHITELIST: "/api/*"
      PROXY_AUTH_ADD: "false"
      APP_HOST: titanic_web_1
      APP_PORT: 3029
      API_URL: "http://${DEVICE_DOMAIN_NAME}:3029/api/"
      API_AUTH_REQUIRED: 0

  web:
    image: ghcr.io/onkr0d/titanic/titanic:latest
    user: 1000:1000
    environment:
      - BIND_ADDRESS=0.0.0.0:3029
      - FIREBASE_PROJECT_ID=${FIREBASE_PROJECT_ID}
      - PLEX_MEDIA_PATH=${PLEX_MEDIA_PATH:-/downloads}
      - IS_DEV=${IS_DEV:-false}
    volumes:
      - ${APP_DATA_DIR}/downloads:/downloads
    restart: on-failure
